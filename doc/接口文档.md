# 硬件信息管理后台接口

> 以下接口中的access_token应以硬件应用appid的身份来调用。

## 新增硬件产品 获取productId

> 该接口有频率限制,超出限制需要额外申请,谨慎调用.

### 请求地址

`POST https://api.weixin.qq.com/wxa/business/runtime/createproduct?access_token=ACCESS_TOKEN`

### 请求参数

Object

请求的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| english_product_name | string | 是       | 产品英文名称 |
| chinese_product_name | string |是       | 产品中文名称 |
| device_default_name | string |是 | 产品昵称 |

### 返回值

Object

返回的 JSON 数据包

| 属性       | 类型   | 说明     |
| ---------- | ------ | -------- |
| product_id | number | 产品id   |
| errcode    | number | 错误代码 |
| errmsg     | string | 错误信息 |

errcode 的合法值

| 值   | 说明           | 最低版本 |
| ---- | -------------- | -------- |
| 0    | 成功 |          |

## 提交公钥 获取keyVersion

### 请求地址

`POST https://api.weixin.qq.com/wxa/business/runtime/registerpubkey?access_token=ACCESS_TOKEN`

### 请求参数

Object

请求的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| product_id | number | 是       | 产品id |
| pubkey | string |是       | 公钥 |

### 返回值

Object

返回的 JSON 数据包

| 属性        | 类型   | 说明       |
| ----------- | ------ | ---------- |
| key_version | number | 公钥版本号 |
| errcode     | number | 错误代码   |
| errmsg      | string | 错误信息   |

errcode 的合法值

| 值   | 说明           | 最低版本 |
| ---- | -------------- | -------- |
| 0    | 成功 |          |

## 预注册硬件设备 注册deviceId

### 请求地址

`POST https://api.weixin.qq.com/wxa/business/runtime/adddevice?access_token=ACCESS_TOKEN`

### 请求参数

Object

请求的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| product_id | number | 是       | 产品id |
| device_id_list | Array.<string> |是       | 设备id列表 |

### 返回值

Object

返回的 JSON 数据包

| 属性       | 类型   | 说明     |
| ---------- | ------ | -------- |
| errcode    | number | 错误代码 |
| errmsg     | string | 错误信息 |

errcode 的合法值

| 值   | 说明           | 最低版本 |
| ---- | -------------- | -------- |
| 0    | 成功 |          |

## 绑定可运行小程序 （该接口仅支持同主体小程序绑定，非同主体小程序请通过邮件绑定）

### 请求地址

`POST https://api.weixin.qq.com/wxa/business/runtime/bindwxaapp?access_token=ACCESS_TOKEN`

### 请求参数

Object

请求的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| product_id | number | 是       | 产品id |
| appid | string |是       | 小程序标识 |

### 返回值

Object

返回的 JSON 数据包

| 属性       | 类型   | 说明     |
| ---------- | ------ | -------- |
| errcode    | number | 错误代码 |
| errmsg     | string | 错误信息 |

errcode 的合法值

| 值   | 说明           | 最低版本 |
| ---- | -------------- | -------- |
| 0    | 成功 |          |

## 应用推送消息后台接口

### 请求地址

`POST https://api.weixin.qq.com/wxa/business/runtime/pushappmsg?access_token=ACCESS_TOKEN`

### 请求参数

Object

请求的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| msg | string | 是       | 推送消息内容，大小不超过5KB |
| push_token | string |是       | 产品中文名称 |

### 返回值

Object

返回的 JSON 数据包

| 属性       | 类型   | 说明     |
| ---------- | ------ | -------- |
| errcode    | number | 错误代码 |
| errmsg     | string | 错误信息 |

errcode 的合法值

| 值   | 说明           |
| ---- | -------------- |
| 0    | 成功 |
| 40101 | 参数错误 |
| 45002 | 推送内容长度超过限制 |
| 48012 | token无效 |

最终应用上收到的消息内容的 JSON 数据包

| 属性       | 类型   |是否必填 | 说明      |
| ---------- | ------ | -------- | ----------------- |
| msg | string | 是       | 推送消息内容，大小不超过5KB |
| appid | string |是       | 小程序标识 |


#### 注:
1.[Access_Token获取方式](https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html)